#include <bits/stdc++.h>

using namespace std;

using iii = tuple<int,int,int>;

int main() {
	cin.tie(0)->sync_with_stdio(false);

	int n, m;
	cin >> n >> m;
	vector<string> grid(n);

	for(auto& line: grid) cin >> line;

	auto bounded = [&](int i, int j) {
		return 0 <= i && i < n && 0 <= j && j < m;
	};

	vector<pair<int,int>> lado = {
		{0, 1},
		{0, -1},
		{-1, 0},
		{1, 0},
	};

	vector<vector<int>> vis(n, vector<int>(m));

	queue<iii> q;
	q.emplace(1, 1, 0);
	q.emplace(1, 1, 3);
	vis[1][1] = 1;

	while(q.size()) {
		auto [i, j, dir] = q.front(); q.pop();
		auto [x, y] = lado[dir];
		x+=i, y += j;

		if(bounded(x, y) && grid[x][y] != '#') {
			vis[x][y] = 1;
			q.emplace(x, y, dir);
		}else {

			int c = 0;
			for(auto [a, b]: lado) {
				a+=i, b += j;
				if(bounded(a, b) && grid[a][b] != '#' &&  !vis[a][b] && dir != c) {
					vis[a][b] = 1;
					q.emplace(a, b, c);	
				}
				c++;
			}
		}
	}


	int ans = 0;
	for(int i = 0; i < n; i++)
		ans += accumulate(begin(vis[i]), end(vis[i]), 0);
	cout << ans << endl;
}
